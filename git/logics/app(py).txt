 ExplicaÃ§Ã£o do CÃ³digo - Sistema de Login com Flask  

 ğŸš€ O que esse cÃ³digo faz?  
âœ… Cria um sistema de login com Flask e SQLite.  
âœ… Permite que um usuÃ¡rio faÃ§a login, acesse uma Ã¡rea restrita (`/dashboard`) e saia (`/logout`).  
âœ… Usa um banco de dados (`studenty.db`) para armazenar os usuÃ¡rios.  

---

 ğŸ“Œ 1. ImportaÃ§Ã£o das Bibliotecas  

from flask import Flask, render_template, request, redirect, url_for, session, jsonify
import sqlite3

ğŸ”¹ Flask â†’ Framework para criar a aplicaÃ§Ã£o web.  
ğŸ”¹ SQLite â†’ Banco de dados para armazenar usuÃ¡rios.  

---

 ğŸ— 2. Criando a AplicaÃ§Ã£o  

app = Flask(__name__)  
app.secret_key = 'salamemingue'   Protege a sessÃ£o do usuÃ¡rio

ğŸ”¹ Define a aplicaÃ§Ã£o Flask e uma chave secreta para seguranÃ§a.  

---

 ğŸ’¾ 3. Criando e Conectando ao Banco de Dados  

def connect_db():
    return sqlite3.connect("studenty.db")

def create_db():
    conn = connect_db()
    cursor = conn.cursor()
    cursor.execute("""
        CREATE TABLE IF NOT EXISTS studenty(
            id INTEGER PRIMARY KEY AUTOINCREMENT,
            name TEXT NOT NULL,
            semester INTEGER NOT NULL,
            email TEXT NOT NULL UNIQUE,
            registration INTEGER NOT NULL UNIQUE,
            password TEXT NOT NULL
        )
    """)
    conn.commit()
    conn.close()

create_db()

ğŸ”¹ `connect_db()` â†’ Conecta ao banco de dados.  
ğŸ”¹ `create_db()` â†’ Cria a tabela `studenty` se ela nÃ£o existir.  

---

 ğŸŒ 4. Rotas da AplicaÃ§Ã£o  

 ğŸ”¹ Rota Principal (`/`)

@app.route('/')
def index():
    return render_template('index.html')

ğŸ”¹ Exibe a pÃ¡gina inicial (`index.html`).  

---

 ğŸ”¹ Rota de Login (`/login`)

@app.route('/login', methods=['POST'])
def login():
    email = request.form.get('email')
    password = request.form.get('password')

    conn = connect_db()
    cursor = conn.cursor()
    cursor.execute("SELECT * FROM studenty WHERE email = ? AND password = ?", (email, password))
    user = cursor.fetchone()
    conn.close()

    if user:
        session['user'] = {
            'id': user[0], 'name': user[1], 'semester': user[2],
            'email': user[3], 'registration': user[4]
        }
        return jsonify({'redirect': url_for('dashboard')})  
    else:
        return jsonify({'error': 'Wrong email or password'}), 401

ğŸ”¹ Verifica o e-mail e senha no banco.  
ğŸ”¹ Se correto, guarda os dados do usuÃ¡rio na sessÃ£o.  
ğŸ”¹ Se errado, retorna erro.  

---

 ğŸ”¹ Rota da Dashboard (`/dashboard`)

@app.route('/dashboard')
def dashboard():
    user = session.get('user')
    if not user:
        return redirect(url_for('index'))  
    return render_template('dashboard.html', user)

ğŸ”¹ Apenas usuÃ¡rios logados podem acessar.  
ğŸ”¹ Se nÃ£o estiver logado, redireciona para a pÃ¡gina inicial.  

---

 ğŸ”¹ Rota de Logout (`/logout`)

@app.route('/logout')
def logout():
    session.pop('user', None)  
    return redirect(url_for('index'))

ğŸ”¹ Remove o usuÃ¡rio da sessÃ£o e redireciona para a pÃ¡gina inicial.  

---

ğŸ 5. Executando o Servidor  

if __name__ == '__main__':
    app.run(debug=True)

ğŸ”¹ Inicia o servidor Flask quando o cÃ³digo for executado.  

---

ğŸ“¢ Resumo Final 
âœ” Cria um banco de dados para armazenar alunos.  
âœ” Permite login com e-mail e senha.  
âœ” Exibe uma Ã¡rea restrita para usuÃ¡rios logados.  
âœ” Permite sair da conta.